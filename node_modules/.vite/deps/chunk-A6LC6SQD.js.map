{
  "version": 3,
  "sources": ["../../@storyblok/field-plugin/dist/field-plugin.js"],
  "sourcesContent": ["const i = (e, t) => typeof e == \"object\" && e !== null && t in e, y = (e) => i(e, \"name\") && typeof e.name == \"string\" && i(e, \"value\") && typeof e.value == \"string\", v = (e) => i(e, \"field_type\") && typeof e.field_type == \"string\" && i(e, \"options\") && Array.isArray(e.options) && e.options.every(y), l = (e) => i(e, \"action\") && typeof e.action == \"string\" && i(e, \"uid\") && typeof e.uid == \"string\", f = (e) => i(e, \"content\") && typeof e.content == \"object\" && e.content !== null && !Array.isArray(e.content), m = (e) => l(e) && i(e, \"language\") && typeof e.language == \"string\" && e.action === \"loaded\" && i(e, \"schema\") && v(e.schema) && i(e, \"story\") && f(e.story), w = (e) => e.reduce((t, s) => (t[s.name] = s.value, t), {}), M = (e) => i(e, \"filename\") && typeof e.filename == \"string\", C = (e) => {\n  const { uid: t, action: s, field: n, ...r } = e;\n  return r;\n}, S = (e) => l(e) && e.action === \"asset-selected\" && P(e) && M(e), P = (e) => !i(e, \"field\") || typeof e.field > \"u\" ? !0 : typeof e.field == \"string\", A = (e) => l(e) && e.action === \"get-context\" && i(e, \"story\") && f(e.story), a = (e) => i(e, \"action\") && e.action === \"plugin-changed\" && i(e, \"uid\") && typeof e.uid == \"string\" && i(e, \"event\") && typeof e.event == \"string\", J = (e) => a(e) && e.event === \"update\" && i(e, \"model\"), x = (e, t) => ({\n  action: \"plugin-changed\",\n  event: \"update\",\n  uid: e,\n  model: t\n}), K = (e) => a(e) && e.event === \"toggleModal\" && i(e, \"status\") && typeof e.status == \"boolean\", F = (e, t) => ({\n  action: \"plugin-changed\",\n  event: \"toggleModal\",\n  uid: e,\n  status: t\n}), N = (e) => a(e) && e.event === \"loaded\", L = (e) => ({\n  action: \"plugin-changed\",\n  event: \"loaded\",\n  uid: e\n}), Q = (e) => a(e) && e.event === \"heightChange\" && i(e, \"height\") && typeof e.height == \"number\", R = (e, t) => ({\n  action: \"plugin-changed\",\n  event: \"heightChange\",\n  uid: e,\n  height: t\n}), T = (e) => a(e) && e.event === \"getContext\", k = (e) => ({\n  action: \"plugin-changed\",\n  event: \"getContext\",\n  uid: e\n}), V = (e) => a(e) && e.event === \"showAssetModal\" && E(e), E = (e) => !i(e, \"field\") || typeof e.field > \"u\" ? !0 : typeof e.field == \"string\", O = (e, t) => ({\n  action: \"plugin-changed\",\n  event: \"showAssetModal\",\n  uid: e,\n  field: t\n}), Y = (e) => `${e.secure ? \"https\" : \"http\"}://${e.host}`, $ = (e) => {\n  const t = new URLSearchParams(e), s = t.get(\"uid\") ?? void 0, n = t.get(\"protocol\") ?? void 0, r = t.get(\"host\") ?? void 0, d = t.get(\"preview\") ?? void 0;\n  return n !== \"http:\" && n !== \"https:\" || typeof s > \"u\" || typeof r > \"u\" ? void 0 : {\n    uid: s,\n    secure: n === \"https:\",\n    host: r,\n    preview: typeof d < \"u\"\n  };\n}, W = (e) => {\n  const t = new URLSearchParams({\n    protocol: e.secure ? \"https:\" : \"http:\",\n    host: e.host,\n    uid: e.uid\n  });\n  return e.preview && t.set(\"preview\", \"1\"), t.toString();\n}, q = (e) => ({\n  spaceId: e.spaceId ?? void 0,\n  story: e.story ?? void 0,\n  storyId: e.storyId ?? void 0,\n  storyLang: e.language === \"\" ? \"default\" : e.language,\n  blockUid: e.blockId ?? void 0,\n  token: e.token ?? void 0,\n  options: w(e.schema.options),\n  uid: e.uid ?? void 0,\n  content: e.model ?? void 0\n}), I = (e) => ({\n  story: e.story ?? void 0\n}), b = {\n  isModalOpen: !1,\n  content: void 0,\n  options: {},\n  storyLang: \"default\",\n  story: { content: {} },\n  blockUid: void 0,\n  storyId: void 0,\n  token: void 0,\n  uid: \"-preview\",\n  spaceId: void 0\n}, U = (e, t, s) => {\n  let n = b, r;\n  return {\n    actions: {\n      setContent: (o) => {\n        const c = (\n          // This is not safe: if the user pass a function to setContent(),\n          //  this code assumes that it is an updater function\n          // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n          // @ts-ignore\n          typeof o == \"function\" ? o(n.content) : o\n        );\n        t(x(e, c)), n = {\n          ...n,\n          content: c\n        }, s(n);\n      },\n      setModalOpen: (o) => {\n        const c = typeof o == \"function\" ? o(n.isModalOpen) : o;\n        t(F(e, c)), n = {\n          ...n,\n          isModalOpen: c\n        }, s(n);\n      },\n      selectAsset: () => new Promise((o) => {\n        r = o, t(O(e));\n      }),\n      requestContext: () => t(k(e))\n    },\n    messageCallbacks: {\n      onStateChange: (o) => {\n        n = {\n          ...n,\n          ...q(o)\n        }, s(n);\n      },\n      onContextRequest: (o) => {\n        n = {\n          ...n,\n          ...I(o)\n        }, s(n);\n      },\n      onAssetSelect: (o) => {\n        r == null || r(C(o));\n      },\n      onUnknownMessage: (o) => {\n        console.debug(\n          `Plugin received a message from container of an unknown action type \"${o.action}\". You may need to upgrade the version of the @storyblok/field-plugin library. Full message: ${JSON.stringify(\n            o\n          )}`\n        );\n      }\n    }\n  };\n}, _ = (e, t) => {\n  const s = () => {\n    t(R(e, document.body.clientHeight));\n  }, n = new ResizeObserver(s);\n  return n.observe(document.body), () => {\n    n.disconnect();\n  };\n}, z = () => {\n  const e = document == null ? void 0 : document.querySelector(\n    'link[href^=\"https://plugins.storyblok.com\"]'\n  );\n  return e == null || e.setAttribute(\"disabled\", \"\"), () => {\n    e == null || e.removeAttribute(\"disabled\");\n  };\n}, D = (e, t, s) => {\n  l(e) && e.uid === t && (m(e) ? s.onStateChange(e) : A(e) ? s.onContextRequest(e) : S(e) ? s.onAssetSelect(e) : s.onUnknownMessage(e));\n}, H = (e, t) => {\n  const s = (n) => {\n    D(n.data, e, t);\n  };\n  return window.addEventListener(\"message\", s, !1), () => {\n    window.removeEventListener(\"message\", s, !1);\n  };\n}, B = \"https://plugin-sandbox.storyblok.com/field-plugin/\", G = () => {\n  const e = new URLSearchParams({\n    url: window.location.href\n  }).toString();\n  return `${B}?${e}`;\n}, X = (e) => {\n  if (!(window.parent !== window))\n    return e({\n      type: \"error\",\n      error: new Error(\n        `The window is not embedded within another window. Did you mean to open the field plugin in the sandbox? ${G()}`\n      )\n    }), () => {\n    };\n  const s = $(window.location.search);\n  if (!s)\n    return e({\n      type: \"error\",\n      error: new Error(\n        \"The URL parameters does not match the expected format.\"\n      )\n    }), () => {\n    };\n  const { uid: n } = s, r = (o) => {\n    const c = \"*\";\n    window.parent.postMessage(o, c);\n  }, d = _(n, r), g = z(), { actions: u, messageCallbacks: h } = U(\n    n,\n    r,\n    (o) => {\n      e({\n        type: \"loaded\",\n        data: o,\n        actions: u\n      });\n    }\n  );\n  r(L(n));\n  const p = H(\n    s.uid,\n    h\n  );\n  return () => {\n    p(), d(), g();\n  };\n};\nexport {\n  C as assetFromAssetSelectedMessage,\n  O as assetModalChangeMessage,\n  X as createFieldPlugin,\n  k as getContextMessage,\n  P as hasField,\n  R as heightChangeMessage,\n  M as isAsset,\n  V as isAssetModalChangeMessage,\n  S as isAssetSelectedMessage,\n  A as isContextRequestMessage,\n  y as isFieldPluginOption,\n  v as isFieldPluginSchema,\n  T as isGetContextMessage,\n  Q as isHeightChangeMessage,\n  a as isMessageToContainer,\n  l as isMessageToPlugin,\n  K as isModalChangeMessage,\n  N as isPluginLoadedMessage,\n  m as isStateChangedMessage,\n  f as isStoryData,\n  J as isValueChangeMessage,\n  F as modalChangeMessage,\n  Y as originFromPluginParams,\n  L as pluginLoadedMessage,\n  $ as pluginUrlParamsFromUrl,\n  w as recordFromFieldPluginOptions,\n  W as urlSearchParamsFromPluginUrlParams,\n  x as valueChangeMessage\n};\n"],
  "mappings": "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",
  "names": []
}
